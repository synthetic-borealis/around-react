(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(9),s=a.n(r),o=(a(16),a(8)),i=a(2),l=a.p+"static/media/logo.c7581985.svg",u=a(0);var d=function(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("div",{className:"header__container",children:Object(u.jsx)("img",{className:"logo",src:l,alt:"Around the U.S."})})})},b=c.a.createContext();var m=function(e){var t=c.a.useContext(b),a="url(".concat(e.card.link,")"),n=e.card.owner._id===t._id,r=e.card.likes.some((function(e){return e._id===t._id})),s="card__delete-button ".concat(n?"":"card__delete-button_hidden"),o="card__like-button ".concat(r?"card__like-button_active":""),i=e.card.likes.length;return Object(u.jsxs)("article",{className:"card",children:[Object(u.jsx)("button",{className:"card__image","aria-label":e.card.name,style:{backgroundImage:a},onClick:function(){e.onCardClick(e.card)}}),Object(u.jsxs)("div",{className:"card__container",children:[Object(u.jsx)("h2",{className:"card__caption",children:e.card.name}),Object(u.jsxs)("div",{className:"card__like-container",children:[Object(u.jsx)("button",{className:o,onClick:function(){e.onCardLike(e.card)},type:"button","aria-label":"Like"}),Object(u.jsx)("p",{className:"card__like-counter",children:i})]})]}),Object(u.jsx)("button",{className:s,onClick:function(){e.onCardDelete(e.card)},type:"button","aria-label":"Delete"})]})};var p=function(e){var t=c.a.useContext(b);return Object(u.jsxs)("main",{children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsxs)("div",{className:"profile__avatar-container",children:[Object(u.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(t.avatar,")")}}),Object(u.jsx)("button",{className:"profile__avatar-button",onClick:e.onEditAvatarClick})]}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsxs)("div",{className:"profile__header",children:[Object(u.jsx)("h1",{className:"profile__name",children:t.name}),Object(u.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"Edit",onClick:e.onEditProfileClick})]}),Object(u.jsx)("p",{className:"profile__job",children:t.about})]}),Object(u.jsx)("button",{className:"add-button",type:"button","aria-label":"Add",onClick:e.onAddPlaceClick})]}),Object(u.jsx)("section",{className:"places",children:e.cards.map((function(t){return Object(u.jsx)(m,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})};var h=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around The U.S."})})},j="form",f="form_type_",_="popup-section_opened",O="popup-section",v="popup-section_type_",x="form-popup",C="form-popup_type_";var g=function(e){var t="".concat(O," ").concat(v).concat(e.name," ").concat(e.isOpen?_:""),a="".concat(x," ").concat(C).concat(e.name),n="".concat(j," ").concat(f).concat(e.name),c="".concat(e.name,"-form"),r="form__title ".concat(e.children?"form__title_gap-size_small":"");return Object(u.jsx)("section",{className:t,children:Object(u.jsxs)("div",{className:a,children:[Object(u.jsxs)("form",{id:c,className:n,action:"#",name:c,autoComplete:"off",onSubmit:e.onSubmit,children:[Object(u.jsxs)("fieldset",{className:"form__fieldset",children:[Object(u.jsx)("h2",{className:r,children:e.title}),e.children]}),Object(u.jsx)("button",{type:"submit",className:"form__submit-btn",children:e.buttonCaption})]}),Object(u.jsx)("button",{className:"close-button",type:"button","aria-label":"Close",onClick:e.onClose})]})})};var k=function(e){var t="".concat(O," ").concat(v,"image ").concat(e.isOpen?_:"");return Object(u.jsx)("section",{className:t,children:Object(u.jsxs)("div",{className:"image-popup",children:[Object(u.jsx)("img",{className:"image-popup__image",src:e.card.link,alt:e.card.name}),Object(u.jsx)("p",{className:"image-popup__caption",children:e.card.name}),Object(u.jsx)("button",{className:"close-button close-button_type_image-popup",type:"button",onClick:e.onClose})]})})};var N=function(e){var t=c.a.useState(""),a=Object(i.a)(t,2),n=a[0],r=a[1],s=c.a.useState(""),o=Object(i.a)(s,2),l=o[0],d=o[1],m=c.a.useContext(b);return c.a.useEffect((function(){r(m.name),d(m.about)}),[m]),Object(u.jsxs)(g,{name:"edit",title:"Edit profile",buttonCaption:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUserUpdate({name:n,about:l})},children:[Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"profile-name-input",type:"text",placeholder:"Name",name:"name",required:!0,className:"form__input",minLength:"2",maxLength:"40",onChange:function(e){r(e.target.value)},value:n||""}),Object(u.jsx)("span",{className:"form__error profile-name-input-error",children:"Here be error message."})]}),Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"profile-job-input",type:"text",placeholder:"Job",name:"about",required:!0,className:"form__input",minLength:"2",maxLength:"400",onChange:function(e){d(e.target.value)},value:l||""}),Object(u.jsx)("span",{className:"form__error profile-job-input-error",children:"Here be error message."})]})]})};var y=function(e){var t=c.a.createRef();return Object(u.jsx)(g,{name:"change-avatar",title:"Change profile picture",buttonCaption:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},children:Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"profile-avatar-input",type:"url",placeholder:"Image Link",name:"avatar",required:!0,className:"form__input form__input_type_avatar-link",ref:t}),Object(u.jsx)("span",{className:"form__error profile-avatar-input-error",children:"Here be error message."})]})})},S=a(5),U=a(7);var L=function(e){var t=c.a.useState({name:"",link:""}),a=Object(i.a)(t,2),n=a[0],r=a[1];function s(e){r(Object(U.a)(Object(U.a)({},n),{},Object(S.a)({},e.target.name,e.target.value)))}return Object(u.jsxs)(g,{name:"add",title:"New place",buttonCaption:"Create",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlaceSubmit(n)},children:[Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"place-title-input",type:"text",placeholder:"Title",name:"name",required:!0,className:"form__input form__input_type_place-title",minLength:"1",maxLength:"30",onChange:s}),Object(u.jsx)("span",{className:"form__error place-title-input-error",children:"Here be error message."})]}),Object(u.jsxs)("label",{className:"form__field",children:[Object(u.jsx)("input",{id:"place-link-input",type:"url",placeholder:"Image Link",name:"link",required:!0,className:"form__input form__input_type_place-link",onChange:s}),Object(u.jsx)("span",{className:"form__error place-link-input-error",children:"Here be error message."})]})]})},A=a(10),E=a(11),P=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(A.a)(this,e),this._baseUrl=a,this._headers=n}return Object(E.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserData",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"updateUserInfo",value:function(e){var t=e.name,a=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:a})}).then(this._handleResponse)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"changeLikeStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"".concat(t?"PUT":"DELETE"),headers:this._headers}).then(this._handleResponse)}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:a})}).then(this._handleResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"d93b3a72-c2aa-468d-b021-56b5e633ed52","Content-Type":"application/json"}});var D=function(){var e=c.a.useState({}),t=Object(i.a)(e,2),a=t[0],n=t[1],r=c.a.useState([]),s=Object(i.a)(r,2),l=s[0],m=s[1],j=c.a.useState(!1),f=Object(i.a)(j,2),_=f[0],O=f[1],v=c.a.useState(!1),x=Object(i.a)(v,2),C=x[0],S=x[1],U=c.a.useState(!1),A=Object(i.a)(U,2),E=A[0],D=A[1],T=c.a.useState(!1),I=Object(i.a)(T,2),R=I[0],H=I[1],J=c.a.useState({}),q=Object(i.a)(J,2),w=q[0],F=q[1];function z(){O(!1),S(!1),D(!1),H(!1),setTimeout((function(){F({})}),500)}return c.a.useEffect((function(){P.getInitialCards().then((function(e){return m(Object(o.a)(e))})).catch(console.log),P.getUserData().then(n).catch(console.log)}),[]),Object(u.jsx)(b.Provider,{value:a,children:Object(u.jsxs)("div",{className:"page-container",children:[Object(u.jsx)(d,{}),Object(u.jsx)(p,{onEditProfileClick:function(){O(!0)},onEditAvatarClick:function(){D(!0)},onAddPlaceClick:function(){S(!0)},cards:l,onCardClick:function(e){F(e),H(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===a._id}));P.changeLikeStatus(e._id,!t).then((function(t){m((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch(console.log)},onCardDelete:function(e){P.removeCard(e._id).then((function(){m((function(t){return t.filter((function(t){return t._id!==e._id}))}))}))}}),Object(u.jsx)(h,{}),Object(u.jsx)(N,{isOpen:_,onClose:z,onUserUpdate:function(e){P.updateUserInfo(e).then(n).finally((function(){return z()})).catch(console.log)}}),Object(u.jsx)(L,{isOpen:C,onClose:z,onAddPlaceSubmit:function(e){P.addCard(e).then((function(e){return m([e].concat(Object(o.a)(l)))})).finally((function(){return z()})).catch(console.log)}}),Object(u.jsx)(y,{isOpen:E,onClose:z,onUpdateAvatar:function(e){var t=e.avatar;P.updateUserAvatar(t).then(n).finally((function(){return z()})).catch(console.log)}}),Object(u.jsx)(g,{name:"confirm",title:"Are you sure?",buttonCaption:"Yes",onClose:z}),Object(u.jsx)(k,{card:w,isOpen:R,onClose:z})]})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),T()}},[[18,1,2]]]);
//# sourceMappingURL=main.bf31cda4.chunk.js.map